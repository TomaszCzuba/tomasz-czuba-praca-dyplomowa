{% extends 'main_template.html' %}
{% load static %}

{% block tytul %} Search {% endblock %}
{% block strona %}

<style>
.collapsible {
  background-color: #777;
  color: white;
  cursor: pointer;
  padding: 18px;
  width: 100%;
  border: none;
  text-align: left;
  outline: none;
  font-size: 15px;
}

.content-collaps {
  padding: 0 18px;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.2s ease-out;
  background-color: #f1f1f1;
}
</style>
<script>
$(function () {
  $('.pr-przepis').hide();
  $('.d2').show();

  $('#select').on("change",function () {
    $('.pr-przepis').hide();
    $('.d'+$(this).val()).show();
  }).val("2");
});
</script>

<div class="upper-section2">

<br>
<h55>Filtr: </h55>
<select id="select" name="dropdown" class="btn btn-secondary dropdown-toggle">

<option value="1">Poziom trudnosci rosnący</option>
<option value="2">Poziom trudnosci malejący</option>
<option value="3">Czas przygotowania rosnący </option>
<option value="4">Czas przygotowania malejący </option>
</select>
<hr>


<div class="container">
<div class="pr-przepis d1">
{% for p in przepis|dictsort:"stopien_trudnosci" %}
         <div class="box-element product">
            <div class="row">
                <div class="col-lg-12">
                    <h1><strong>{{ p.nazwa }}</strong></h1>
                    <hr>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-8">
                        {{ p.krotki_opis }} <br> <br>
                        <button type="button" class="collapsible">Pokaż skladniki  <i class="fas fa-chevron-down"></i></button>
                            <div class="content-collaps">
                                {{ p.skladniki_ilosc|linebreaks }}
                            </div> <br>
                        Poziom trudności: {{ p.stopien_trudnosci }} / 10 <br> <br>
                        Czas przygotowania: {{ p.czas_przygotowania }} min <br>
                </div>
                <div class="col-lg-4">
                    <img src=/media/{{p.zdjecie}} class="przepis-wszystkie-zdjecie">
                </div>
            </div>
                <hr>
            <div class="row">
                <div class="col-lg-8">
                    <button data-product="{{ p.id }}" data-action="add" class="btn btn-outline-secondary add-btn update-cart" id="element">Dodaj składniki do listy zakupów</button>
                </div>
                <div class="col-lg-4">
                    <button data-product="{{ p.id }}" data-action="add" class="btn btn-outline-secondary add-btn update-cart" id="element">Zobacz więcej</button>
                </div>
            </div>
        </div>
        <br>
{% endfor %}
    </div>
</div>
</div>



<div class="container">
<div class="pr-przepis d2">

{% for p in przepis|dictsortreversed:"stopien_trudnosci" %}
    <div class="box-element product">
            <div class="row">
                <div class="col-lg-12">
                    <h1><strong>{{ p.nazwa }}</strong></h1>
                    <hr>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-8">
                        {{ p.krotki_opis }} <br> <br>
                        <button type="button" class="collapsible">Pokaż skladniki  <i class="fas fa-chevron-down"></i></button>
                            <div class="content-collaps">
                                {{ p.skladniki_ilosc|linebreaks }}
                            </div> <br>
                        Poziom trudności: {{ p.stopien_trudnosci }} / 10 <br> <br>
                        Czas przygotowania: {{ p.czas_przygotowania }} min <br>
                </div>
                <div class="col-lg-4">
                    <img src=/media/{{p.zdjecie}} class="przepis-wszystkie-zdjecie">
                </div>
            </div>
                <hr>
            <div class="row">
                <div class="col-lg-8">
                    <button data-product="{{ p.id }}" data-action="add" class="btn btn-outline-secondary add-btn update-cart" id="element">Dodaj składniki do listy zakupów</button>
                </div>
                <div class="col-lg-4">
                    <button data-product="{{ p.id }}" data-action="add" class="btn btn-outline-secondary add-btn update-cart" id="element">Zobacz więcej</button>
                </div>
            </div>
        </div>
        <br>
{% endfor %}
    </div>
</div>
</div>

<div class="container">
<div class="pr-przepis d3">
    <div class="row">
{% for p in przepis|dictsort:"czas_przygotowania" %}
        <div class="box-element product">
            <div class="row">
                <div class="col-lg-12">
                    <h1><strong>{{ p.nazwa }}</strong></h1>
                    <hr>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-8">
                        {{ p.krotki_opis }} <br> <br>
                        <button type="button" class="collapsible">Pokaż skladniki  <i class="fas fa-chevron-down"></i></button>
                            <div class="content-collaps">
                                {{ p.skladniki_ilosc|linebreaks }}
                            </div> <br>
                        Poziom trudności: {{ p.stopien_trudnosci }} / 10 <br> <br>
                        Czas przygotowania: {{ p.czas_przygotowania }} min <br>
                </div>
                <div class="col-lg-4">
                    <img src=/media/{{p.zdjecie}} class="przepis-wszystkie-zdjecie">
                </div>
            </div>
                <hr>
            <div class="row">
                <div class="col-lg-8">
                    <button data-product="{{ p.id }}" data-action="add" class="btn btn-outline-secondary add-btn update-cart" id="element">Dodaj składniki do listy zakupów</button>
                </div>
                <div class="col-lg-4">
                    <button data-product="{{ p.id }}" data-action="add" class="btn btn-outline-secondary add-btn update-cart" id="element">Zobacz więcej</button>
                </div>
            </div>
        </div>
        <br>
{% endfor %}
    </div>
</div>
</div>

<div class="container">
<div class="pr-przepis d4">
    <div class="row">
{% for p in przepis|dictsortreversed:"czas_przygotowania" %}
        <div class="box-element product">
            <div class="row">
                <div class="col-lg-12">
                    <h1><strong>{{ p.nazwa }}</strong></h1>
                    <hr>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-8">
                        {{ p.krotki_opis }} <br> <br>
                        <button type="button" class="collapsible">Pokaż skladniki  <i class="fas fa-chevron-down"></i></button>
                            <div class="content-collaps">
                                {{ p.skladniki_ilosc|linebreaks }}
                            </div> <br>
                        Poziom trudności: {{ p.stopien_trudnosci }} / 10 <br> <br>
                        Czas przygotowania: {{ p.czas_przygotowania }} min <br>
                </div>
                <div class="col-lg-4">
                    <img src=/media/{{p.zdjecie}} class="przepis-wszystkie-zdjecie">
                </div>
            </div>
                <hr>
            <div class="row">
                <div class="col-lg-8">
                    <button data-product="{{ p.id }}" data-action="add" class="btn btn-outline-secondary add-btn update-cart" id="element">Dodaj składniki do listy zakupów</button>
                </div>
                <div class="col-lg-4">
                    <button data-product="{{ p.id }}" data-action="add" class="btn btn-outline-secondary add-btn update-cart" id="element">Zobacz więcej</button>
                </div>
            </div>
        </div>
        <br>
{% endfor %}
    </div>
</div>
</div>
<br>
    <br>
    <br>
</div>



<script>
var coll = document.getElementsByClassName("collapsible");
var i;

for (i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if (content.style.maxHeight){
      content.style.maxHeight = null;
    } else {
      content.style.maxHeight = content.scrollHeight + "px";
    }
  });
}
</script>
{% endblock %}